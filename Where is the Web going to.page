---
title: Where is the Web going to?
categories: Classes AJAX Security HTTP
toc: no
...

view this as a [slideshow](?export&format=Slidy)


# The recent history of the WWW

**1995** Netscape has a 80% share on the browser market. Microsoft
  releases IE 1.

**1996** Macromedia releases Flash.

**1997** Standardization of [JavaScript]() into [ECMAScript]().

**1997** Microsoft bundles IE 4 into Windows NT.

**1998** Netscape Communications is bought by AOL. MS has won the
  first browser war.

**1998** Publication of the [XML]() standard. Work on [XHTML](HTML)
  begins.

> "The XHTML family is the next step in the evolution of the
> Internet. By migrating to XHTML today, content developers can enter
> the XML world with all of its attendant benefits, while still
> remaining confident in their content's backward and future
> compatibility."

**2002** The [JSON]() data interchange format is published through
  <http://json.org>.

-----------

**2002** Apple forks KHTML and KJS, the engines of the Konqueror
  browser. The project is named WebKit.

**2003** Apple releases Safari for MacOS.

**2004** The Mozilla Foundation releases Firefox 1.

**2004** Members of Apple, Mozilla and Opera leave the [W3C]() to
  found the WHATWG. Work on HTML5 is started.

**2005** Jesse James Garret coins the word [AJAX]().

**2005** IE 7 is out.  It doesn't display `application/xhtml+xml`
  documents.

**2006** MS discontinues the FrontPage WYSIWYG web editor.

**2006** Tim Berners Lee declares:

> "The attempt to get the world to switch to XML... all at once didn't
> work. The large HTML-generating public did not move... Some large
> communities did shift and are enjoying the fruits of well-formed
> systems... The plan is to charter a completely new HTML group."

---------

**2007** The [W3C]() HTML working group agrees to adopt WHATWG's HTML5
  proposal as base for the next [HTML]() standard.

**2008** Google releases Chrome 1. It uses the WebKit engine.

**2009** IE 8 is out. It still doesn't display `application/xhtml+xml`
  documents!

**2009** Ryan Dahl starts working on [Node.js]().

**2010** Steve Jobs announces the future death of Flash.

**2011** Adobe announces it will stop development of Flash and start
  working on HTML5-based products.

**2011** IE9 is out. It is the first time IE scores a 100/100 in Acid3
  tests.

**2013** HTML5 is a *Candidate Recommendation*.


# Browser usage statistics: prehistory

**Source:** Net Applications through
<http://en.wikipedia.org/wiki/Usage_share_of_web_browsers>

            IE   Opera   Netscape   Mozilla   Firefox   Safari
--------  ----- ------- ---------- --------- --------- --------
**2004**    91%    1%       2%       1%         4%        2%
**2005**    86%    1%       1%                  9%        3%
**2006**    80%    1%       1%                 14%        4%
**2007**    80%    2%                          16%        3%


# Browser usage statistics year 2008

<div id="browser-ww-monthly-200812-200912-bar" width="600"
height="400" style="width:600px; height: 400px;"></div><p>Source: <a
href="http://gs.statcounter.com/#browser-ww-monthly-200812-200912-bar">StatCounter
Global Stats - Browser Market Share</a></p><script
type="text/javascript"
src="http://www.statcounter.com/js/FusionCharts.js"></script><script
type="text/javascript"
src="http://gs.statcounter.com/chart.php?browser-ww-monthly-200812-200912-bar"></script>

# Browser usage statistics last year

<div id="browser-ww-monthly-201103-201203-bar" width="600"
height="400" style="width:600px; height: 400px;"></div><p>Source: <a
href="http://gs.statcounter.com/#browser-ww-monthly-201103-201203-bar">StatCounter
Global Stats - Browser Market Share</a></p><script
type="text/javascript"
src="http://www.statcounter.com/js/FusionCharts.js"></script><script
type="text/javascript"
src="http://gs.statcounter.com/chart.php?browser-ww-monthly-201103-201203-bar"></script>

# Browser usage statistics this year

<div id="browser-ww-monthly-201203-201303-bar" width="600"
height="400" style="width:600px; height: 400px;"></div><p>Source: <a
href="http://gs.statcounter.com/#browser-ww-monthly-201203-201303-bar">StatCounter
Global Stats - Browser Market Share</a></p><script
type="text/javascript"
src="http://www.statcounter.com/js/FusionCharts.js"></script><script
type="text/javascript"
src="http://gs.statcounter.com/chart.php?browser-ww-monthly-201203-201303-bar"></script>

# Mobile browsers, this year

<div id="mobile_browser-ww-monthly-201203-201303-bar" width="600"
height="400" style="width:600px; height: 400px;"></div><p>Source: <a
href="http://gs.statcounter.com/#mobile_browser-ww-monthly-201203-201303-bar">StatCounter
Global Stats - Browser Market Share</a></p><script
type="text/javascript"
src="http://www.statcounter.com/js/FusionCharts.js"></script><script
type="text/javascript"
src="http://gs.statcounter.com/chart.php?mobile_browser-ww-monthly-201203-201303-bar"></script>


# How HTML5 is changing the web

> - **Semanting tagging** (help search engines),
> - **Client storage** (web storage, file API...),
> - **Offline applications** (e.g. offline emails),
> - **WebSockets** (bidirectinal client-server channel)
> - **`<audio>`/`<video>` API** (for rich media)
> - **Advanced graphics:** SVG (vectorized), canvas (2D), WebGL (3D)
> - **Web workers:** native multithreading
> - **Mobile technologie:** (touch events, geo location, 
> - **Other features:** Fonts, ARIA, Geolocation, drag and drop

See <http://slides.html5rocks.com>

# How HTML5 is changing the web

![](http://upload.wikimedia.org/wikipedia/commons/thumb/f/f7/HTML5-APIs-and-related-technologies-by-Sergey-Mavrody.png/800px-HTML5-APIs-and-related-technologies-by-Sergey-Mavrody.png)



# What's left of the XHTML years

> - Write valid markup, use validator tools: <http://validator.w3.org>;
> - Content ([HTML]()) - Presentation ([CSS]()) - Logic ([JavaScript]()) separation;
> - Incremental development
> - Graceful degradation;
> - Unobtrusive [JavaScript]() and [CSS]().

**And follow the standards!!!**

> - <http://www.w3.org> ([HTML](), [CSS](), [DOM](), ...);
> - <https://developer.mozilla.org> ([JavaScript]());

**Bad sources:** `www.siteduzero.com`, `www.developpez.net`, ...  even
  `www.stackoverflow.com`!


# Unobtrusive JavaScript

**or, How to survive in Browser Compatibility Hell:**

> 1. **Usability:** An unobtrusive DOM script does not draw the
  attention of the user - visitors use it without thinking about it.

> 2. **Graceful degradation:** Unobtrusive DOM scripts never generate
  error messages, in any browser, even when they fail. If features
  cannot be presented properly, they silently disappear.

> 3. **Accessibility:** If any script fails, the page still delivers
  its core functions and information via the markup, stylesheets
  and/or server-side scripting.

> 4. **Separation:** For the sake of interoperability and reusability,
  all JavaScript code is maintained separately, without impacting
  other files of script, markup or code.

Read the WaSP manifesto:
<http://www.webstandards.org/action/dstf/manifesto/>


# Unobtrusive JavaScript example

A form with a date field:
<input id="date" type="date" /><input id="subdate" type="submit"
value="Check availability">

<div id="datetext" style="text-align:center"></div>

> - The server does a **minimal validation** : it only needs a valid date format

~~~ {.javascript}
/*
  This test accepts many date formats:
    it accepts      03/09/2013
    or              Mar 9, 2013
    or              3-9-13
    etc.
*/
var date = Date.parse(req.body.date);
if (date) {
  ...
}
~~~

> - At startup, [JavaScript]() transforms the form into an
auto-submitting AJAX widget ([click here](javascript:gently\(\))). This
helps the user into formatting the date in a standard way.

<script src="/js/jquery.min.js"></script>
<script src="/js/jquery-ui.packed.js"></script>
<style>
@import url('/css/smoothness/jquery-ui.all.css');
</style>

<script>
function gently() {
  $('#subdate').hide();
  $('#date').datepicker({
    onSelect : function (date, inst) {
      $('#datetext').html('Flights available on ' + date + ': ...');
    }
  });
}
</script>



# Going mobile (more Browser Hell)

> - [JavaScript]() incompatibilities,

> - Outdated browser versions (locked by manufacturer),

**Solution:** Use *client-side frameworks* (e.g. JQuery <http://jquery.com>).

> - Layouts for different screen sizes can be a nightmare,

> - [CSS]() + [JavaScript]() incompatibilities,

> - [JavaScript]() workarounds can be very slow on mobiles,

**Solution:** Use *front-end frameworks* (e.g. Bootstrap <http://twitter.github.com/bootstrap/>)

> - Native graphics (canvas, SVG, WebGL) are a nightmare

**Solution:** Use *graphic libraries* (e.g. Raphaël <http://raphaeljs.com/>).



# And your role as a web developer?

It is in your **interest** that many different browsers keep competing
**at an equal level**:

> - More R&D, faster releases;
> - Better compatibility.

It is your **duty** to:

> - Develop portably, follow standards;
> - Test on many platforms;
> - Openly distribute your code;
> - Participate to the development of the standards, comment, request features.

**Remember:** any time you rely upon a proprietary feature, you are
  **taking side in a war**!


# And what about security?

**Problems that would be easy to fix**

> - Inconsistent Same Origin Policies;
> - Lack of strict type policies: makes [XSS]() the default behaviour;

**Problems that would require a major effort**

> - Flaws in the [HTTP]() protocol: [CSRF]() attacks will stay a major problem;
> - Mash-up model too liberal: click-jacking.

**Another war taking place**

> - Web developers want **more features**, **easy learning curves**;
> - Security experts advocate for **more strictness**, **richer languages**.

Browsers are clearly **favoring the former** (because they generate more
revenue?)


# Easy problems

**Same Origin Policy**

> - It never has been object of a [W3C]() working group;
> - A serious reflection on a default SOP and directives on its implementation would be beneficial.

**Preventing injections and XSS**

> - Injections come from a confusion between **data** and **logic**:
    e.g. **textual inputs** are wrongly interpreted as **[SQL]()
    commands**.

**Strict typing techniques** could prevent such confusion.
    
> - Strictly typed languages like Java are regarded as **too verbose**
    for quick web development (and dynamic polymorphism makes
    security checks slower).

> - Statically typed languages (generally functional) like OCaml and
    Haskell are regarded as **too hard to learn**.


# Beyond JavaScript: Full Stack Frameworks

**Full Stack Frameworks** are complete client-server solutions
for developing web applications. (e.g.: [Node.js]() + [JavaScript]())

Typically use the **same language** for server and client logic.

Handle **user**, or in some cases **multi-user**, **sessions**.

Compile high-level code to:

> - Fast interpreted or executable code on the server side,
> - [JavaScript]() code on the client side.
> - Remote calls can be translated to [AJAX]().

**Automatically** introduce **security checks** where possible:

> - Automatic sanitization of user input (much easier with strict types),
> - Automatic inclusion of anti-[CSRF]() tokens.

Can automatically produce a **[REST]() or SOAP API**.


# Some frameworks

**Microsoft:** [ASP.NET](http://www.asp.net/),

**PHP:** [Zend](http://www.zend.com/),

**Python:** [Zope](http://zope.org/), [Django](http://www.djangoproject.com/)

**Ruby:** [RubyOnRails](http://rubyonrails.org),

**Java:** [J2EE](http://java.sun.com/), [GWT](http://code.google.com/webtoolkit) (Google Web Toolkit),

**JavaScript:** [Node.js](http://nodejs.org),

**OCaml:** 

> - [OCSIGEN](http://ocsigen.org/) developed at Paris 6, 7 and CNRS,
> - [OPA](http://opalang.org/) developed by [MLState](http://www.mlstate.com/) (based in Paris), very simple syntax!

**Haskell:** [Yesod](http://www.yesodweb.com),

**Google:** [Dart](http://dartlang.org/) just a (typed) client-side language


# Life in the Cloud

HTML5 was born with the cloud in mind:

> - GMail, Google documents, ...
> - Facebook, twitter, flikr, ...
> - Last.fm, Spotify, Deezer, ...
> - Smartphone apps, Chromebooks, ...

But the cloud is changing the way web developers work:

> - Github <http://github.com> (social source code repository and version control system),

> - Platform as a Service: [Joyent](http://joyent.com/), [Nodejitsu](https://www.nodejitsu.com/), [Heroku](https://www.heroku.com/), [AppFog](https://www.appfog.com/), ... (web hosting without installing software)

> - IDE in the Cloud: [Cloud 9](http://c9.io) (developing and running [Node.js]() applications online).

Expect more in the next few years !


# And privacy?

**Security** may not be the first concern of browser makers. But
    **privacy** is even more mistreated (and why should Google want to
    protect it?)
    

Known privacy problems in [HTTP]():

> - Third party cookies, ([HTTP](), Flash, ...)
> - [Evercookies](http://samy.pl/evercookie/) (undeletable cookies by Samy!)
> - Navigation tracing (via [CSS](), [HTTP]() headers, etc.)



# Art and HTML5

<iframe src="http://xkcd.com/1110/" style="width:100%;height:600px"></iframe>

----

**Click and Drag:** <http://xkcd.com/1110/>

> - Very large map made of 2592 tiles,
> - Hard to predict valid URLs.

**Time:** <http://xkcd.com/1190/#verbose>

> - Very slow movie (1 frame/hour),
> - Choice of the frame on the **server-side**,
> - **Crypto hashes** to make frame URLs unpredicatble.

**Externalities:** <http://xkcd.com/1193/>

Content changes dynamically based on

> - Content on Wikipedia (nasty April fools'),
> - Donations to Wikipedia,
> - Current winner of hash breaking competions (sadly, only US universities can participate).

Some nice challenges for you:

> - Write a script to explore the whole **Click and Drag**,
> - Write a script to log all the frame URLs of **Time**,
> - Win the hash competition of **Externalities**.

